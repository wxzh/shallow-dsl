\documentclass{jfp1}

% The following \documentclass options may be useful:

% preprint      Remove this option only once the paper is in final form.
% 10pt          To set in 10-point type instead of 9-point.
% 11pt          To set in 11-point type instead of 9-point.
% numbers       To obtain numeric citation style instead of author/year.

\usepackage{color}
\usepackage{listings}
\usepackage{url}
\usepackage{xspace}
\usepackage{syntax}
\usepackage{comment}

\newcommand{\dsl}{\emph{scans}\xspace}
\newcommand{\interp}{\textsc{Interpreter}\xspace}

%\newcommand{\authornote}[3]{}
\newcommand{\authornote}[3]{{\color{#2} {\sc #1}:#3}}
\newcommand{\weixin}[1]{\authornote{weixin}{cyan}{#1}}
\newcommand{\bruno}[1]{\authornote{bruno}{red}{#1}}
% \setlist[itemize]{noitemsep,nolistsep}
% \setlist[enumerate]{noitemsep,nolistsep}

\lstdefinelanguage{JavaScalaHaskell}{
  morekeywords={public,int,interface,implements,default,
    abstract,case,void,catch,class,def,static,%
    do,else,extends,false,final,finally,%
    for,if,implicit,import,match,mixin,%
    new,null,object,override,package,%
    private,protected,requires,return,sealed,%
    super,this,throw,trait,true,try,%
    type,var,val,while,yield,with,data,type,newtype},
  otherkeywords={=>,<-,<\%,<:,>:,\#,@},
  sensitive=true,
  morecomment=[l]{//},
  morecomment=[n]{/*}{*/},
  morestring=[b]",
  morestring=[b]',
  morestring=[b]"""
}

\lstset{ %
language=JavaScalaHaskell,                % choose the language of the code
columns=fullflexible,
keepspaces=true,
lineskip=-1pt,
basicstyle=\ttfamily\small,       % the size of the fonts that are used for the code
numberstyle=\ttfamily\tiny,      % the size of the fonts that are used for the line-numbers
stepnumber=1,                   % the step between two line-numbers. If it's 1 each line will be numbered
numbers=none,
numbersep=5pt,                  % how far the line-numbers are from the code
backgroundcolor=\color{white},  % choose the background color. You must add \usepackage{color}
showspaces=false,               % show spaces adding particular underscores
showstringspaces=false,         % underline spaces within strings
showtabs=false,                 % show tabs within strings adding particular underscores
%  frame=single,                   % adds a frame around the code
tabsize=2,                  % sets default tabsize to 2 spaces
captionpos=none,                   % sets the caption-position to bottom
breaklines=true,                % sets automatic line breaking
breakatwhitespace=false,        % sets if automatic breaks should only happen at whitespace
title=\lstname,                 % show the filename of files included with \lstinputlisting; also try caption instead of title
escapeinside={(*}{*)},          % if you want to add a comment within your code
keywordstyle=\ttfamily\bfseries,
aboveskip=3pt,
belowskip=-1pt
% commentstyle=\color{Gray},
% stringstyle=\color{Green}
}
\begin{document}

\special{papersize=8.5in,11in}
\setlength{\pdfpageheight}{\paperheight}
\setlength{\pdfpagewidth}{\paperwidth}

% Uncomment the publication rights you want to use.
%\publicationrights{transferred}
%\publicationrights{licensed}     % this is the default
%\publicationrights{author-pays}

\title{Shallow EDSLs and Object-Oriented Programming}
\subtitle{(Functional Pearl)}

\author[W. Zhang and B. C. d. S. Oliveira]
        {WEIXIN ZHANG and BRUNO C. d. S. OLIVEIRA\\
         The University of Hong Kong, Hong Kong\\
         \email{bruno@cs.hku.hk}}
%\authorinfo{Name}
%           {Affiliation2/3}
%           {Email2/3}

\maketitle

\begin{abstract}

Shallow Embedded Domain Specific Languages (EDSLs) use
\emph{procedural abstraction} to directly encode a DSL into an existing host language. Procedural abstraction has
been argued to be the essence of Object-Oriented Programming (OOP). 
%Given
%that OO languages have evolved over more than 50 years
%to improve the use of procedural abstraction, they ought to have some
%advantages to encode shallow EDSLs.
This paper argues that OOP abstractions 
(including \emph{inheritance}, \emph{subtyping} and
\emph{type-refinement}) 
increase the modularity and reuse of shallow
EDSLs when compared to classical procedural abstraction. We make this
argument by taking a recent paper by Gibbons and Wu, where procedural
abstraction is used in Haskell to model a simple shallow EDSL, and we recode
that EDSL in Scala. From the \emph{semantic}
and \emph{modularity} point of view the Scala version has clear advantages 
over the Haskell version. 

%To alleviate some of the syntactical disadvantages of Java, we create
%an annotation inspired by \emph{family polymorphism} and a recent
%solution to the Expression Problem.
%The annotation uses transparent code generation techniques to
%automatically eliminate large portions of boilerplate code.
%To further illustrate the applicability of our tool and techniques, we conduct
%several case studies using larger DSLs from the literature.
\end{abstract}

\begin{comment}
\category{CR-number}{subcategory}{third-level}

% general terms are not compulsory anymore,
% you may leave them out
\terms
term1, term2

\keywords
keyword1, keyword2
\end{comment}

%===============================================================================
\input{sections/Introduction.tex}
\input{sections/ShallowOO.tex}
\input{sections/Interpretations.tex}
%\input{sections/Transformations.tex}
%\input{sections/RelatedWorkShort.tex}
\input{sections/Conclusion.tex}
%\input{sections/Modularity.tex}
%\input{sections/Overview.tex}
%\input{sections/Tool.tex}
%\input{sections/CaseStudy.tex}
%\input{sections/RelatedWork.tex}
%\input{sections/Discussion.tex}
%\acks

%Acknowledgments, if needed.

% We recommend abbrvnat bibliography style.

\bibliographystyle{abbrvnat}
\bibliography{paper}

% The bibliography should be embedded for final submission.

\end{document}

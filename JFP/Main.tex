\documentclass{jfp1}

\usepackage{caption}
\usepackage{wrapfig}
\usepackage{xspace}
\usepackage{xypic}
%\usepackage{amsmath}
\usepackage{url}
\usepackage{syntax}
\usepackage{textcomp}
\usepackage{color}
\usepackage{comment}
\newcommand{\dsl}{\textsc{Scans}\xspace}
\newcommand{\interp}{\textsc{Interpreter}\xspace}
\newcommand{\an}[3]{{\color{#2} {\sc #1}:#3}}
%\newcommand{\an}[3]{}
\newcommand{\weixin}[1]{\an{weixin}{cyan}{#1}}
\newcommand{\bruno}[1]{\an{bruno}{blue}{#1}}

\let\oldpar\paragraph
\renewcommand{\paragraph}[1]{\vspace{-7pt}\oldpar{#1}}
%\let\oldsec\section
%\renewcommand{\section}[1]{\vspace{-7pt}\oldsec{#1}}
\let\oldsubsec\subsection
\renewcommand{\subsection}[1]{\vspace{-7pt}\oldsubsec{#1}}

%% for comments
\input{Preamble}

%% Bibliography style
\bibliographystyle{jfp}

% Document starts
\begin{document}

% Title portion
\title{Shallow EDSLs and Object-Oriented Programming: Beyond Simple Compositionality}

\author[W. Zhang and B. Oliveira]
        {WEIXIN ZHANG and BRUNO C. D. S. OLIVEIRA\\
         The University of Hong Kong, Hong Kong}

\maketitle[f]

\begin{abstract}
Shallow embedded domain-specific languages (EDSLs) use
\emph{procedural abstraction} to directly encode a DSL into an
existing host language. Procedural abstraction has 
been argued to be the essence of object-oriented programming (OOP).
This pearl argues that OOP abstractions
(including \emph{inheritance}, \emph{subtyping}, and
\emph{type-refinement})
increase the modularity and reuse of shallow
EDSLs when compared to classical procedural abstraction by enabling a
simple way to express \emph{multiple, possibly dependent, interpretations}. We make this
argument by taking a recent paper by Gibbons and Wu, where procedural
abstraction is used in Haskell to model a simple shallow EDSL, and we recode
that EDSL in Scala. 
We further illustrate our functional OOP approach with
a case study on refactoring a deep external SQL DSL implementation to make it
more modular, shallow, and embedded.
\end{abstract}

\input{sections/Introduction}

\input{sections/ShallowOO}

\input{sections/Interpretations}

\input{sections/Factory}

\input{sections/Casestudy}

\input{sections/Conclusion}

% Bibliography
%\renewcommand{\section}[1]{\oldsec{#1}}

\vspace{-7pt}
\bibliography{Main}

% History dates
%\received{February 2007}{March 2009}{June 2009}

\end{document}

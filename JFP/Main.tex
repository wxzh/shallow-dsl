\documentclass[english,submission]{programming}

\usepackage{mathtools}
\usepackage{caption}
\usepackage{wrapfig}
\usepackage{xspace}
\usepackage{xypic}
\usepackage{hyperref}
%\usepackage{amsmath}
\usepackage{url}
\usepackage{syntax}
\usepackage{textcomp}
\usepackage{color}
\usepackage{comment}
\newcommand{\dsl}{\textsc{Scans}\xspace}
\newcommand{\interp}{\textsc{Interpreter}\xspace}
\newcommand{\an}[3]{{\color{#2} {\sc #1}:#3}}
%\newcommand{\an}[3]{}
\newcommand{\weixin}[1]{\an{weixin}{cyan}{#1}}
\newcommand{\bruno}[1]{\an{bruno}{blue}{#1}}

\renewcommand*{\sectionautorefname}{Section}
% for code that uses string literal in lhs2TeX
\DeclareOldFontCommand{\tt}{\normalfont\ttfamily}{\texttt}

\let\oldpar\paragraph
\renewcommand{\paragraph}[1]{\vspace{-7pt}\oldpar{#1}}
%\let\oldsec\section
%\renewcommand{\section}[1]{\vspace{-7pt}\oldsec{#1}}
\let\oldsubsec\subsection
\renewcommand{\subsection}[1]{\vspace{-7pt}\oldsubsec{#1}}

%% for comments
\input{Preamble}

% Document starts
\begin{document}

% Title portion
\title{Shallow EDSLs and Object-Oriented Programming}
\subtitle{Beyond Simple Compositionality}

\author[a]{Weixin Zhang}
\author[a]{Bruno C. d. S. Oliveira}
\affiliation[a]{The University of Hong Kong, Hong Kong, China}
%\author[W. Zhang and B. Oliveira]
%        {WEIXIN ZHANG and BRUNO C. D. S. OLIVEIRA\\
%         The University of Hong Kong, Hong Kong}

\paperdetails{
  %% perspective options are: art, sciencetheoretical, scienceempirical, engineering.
  %% Choose exactly the one that best describes this work. (see 2.1)
  perspective=art,
  %% State one or more areas, separated by a comma. (see 2.2)
  %% Please see list of areas in http://programming-journal.org/cfp/
  %% The list is open-ended, so use other areas if yours is/are not listed.
  area={Domain-Specific Languages, Modularity and separation of concerns},
  %% You may choose the license for your paper (see 3.)
  %% License options include: cc-by (default), cc-by-nc
  % license=cc-by,
}

\maketitle

\begin{abstract}
Shallow embedded domain-specific languages (EDSLs) use
\emph{procedural abstraction} to directly encode a DSL into an
existing host language. Procedural abstraction has 
been argued to be the essence of object-oriented programming (OOP).
This pearl argues that OOP abstractions
(including \emph{inheritance}, \emph{subtyping}, and
\emph{type-refinement})
increase the modularity and reuse of shallow
EDSLs when compared to classical procedural abstraction by enabling a
simple way to express \emph{multiple, possibly dependent, interpretations}. We make this
argument by taking a recent paper by Gibbons and Wu, where procedural
abstraction is used in Haskell to model a simple shallow EDSL, and we recode
that EDSL in Scala. 
We further illustrate our functional OOP approach with
a case study on refactoring a deep external SQL DSL implementation to make it
more modular, shallow, and embedded.
\end{abstract}

\input{sections/Introduction}

\input{sections/ShallowOO}

\input{sections/Interpretations}

\input{sections/TypeClass}

\input{sections/Factory}

\input{sections/Casestudy}

\input{sections/Conclusion}

% Bibliography
%\renewcommand{\section}[1]{\oldsec{#1}}

\bibliography{Main}

% History dates
%\received{February 2007}{March 2009}{June 2009}

\end{document}
